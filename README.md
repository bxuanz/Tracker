<div align="center">
  <img src="./assets/icon.png" alt="tracker-icon" height="120"/>

  # Tracker
  
  **é«˜æ€§èƒ½æ—¶åºå½±åƒäº‹ä»¶æ ‡æ³¨å·¥å…· (High-Performance Temporal Event Tracker)**

  [![PyQt6](https://img.shields.io/badge/GUI-PyQt6-green.svg)](https://riverbankcomputing.com/software/pyqt/)
  [![Python](https://img.shields.io/badge/Python-3.10+-blue.svg)](https://www.python.org/)
  [![License](https://img.shields.io/badge/License-MIT-orange.svg)](LICENSE)
  [![Status](https://img.shields.io/badge/Status-Stable-brightgreen.svg)]()

  **[English](README_EN.md) | ç®€ä½“ä¸­æ–‡**

</div>

<br/>

**Tracker** æ˜¯ä¸€æ¬¾ä¸“ä¸º **â€œä½ç½®å›ºå®šã€å±æ€§å˜åŒ–â€** çš„æ—¶åºäº‹ä»¶ï¼ˆå¦‚é¥æ„Ÿå½±åƒä¸­çš„å»ºç­‘æ–½å·¥è¿›åº¦ã€æ¤è¢«ç”Ÿé•¿ç›‘æµ‹ã€å®šç‚¹è®¾æ–½ç›‘æ§ï¼‰è®¾è®¡çš„è½»é‡çº§ã€é«˜æ€§èƒ½æ ‡æ³¨å·¥å…·ã€‚

å®ƒé’ˆå¯¹ **GB çº§å¤§å°ºåº¦é¥æ„Ÿå½±åƒ (`.tif`)** è¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ï¼Œè§£å†³äº†ä¼ ç»Ÿå·¥å…·åœ¨åŠ è½½å¤šæ³¢æ®µã€è¶…å¤§åˆ†è¾¨ç‡å½±åƒæ—¶çš„å¡é¡¿é—®é¢˜ã€‚V13 ç‰ˆæœ¬å¼•å…¥äº† **å¤šç»´è´¨é‡è¯„ä»·ä½“ç³»**ã€**æ™ºèƒ½é˜²é®æŒ¡æ¸²æŸ“** ä¸ **å…¨è‡ªåŠ¨ä¿å­˜æœºåˆ¶**ï¼Œæ˜¾è‘—æå‡äº†æ•°æ®é›†æ„å»ºçš„æ•ˆç‡ä¸è´¨é‡ã€‚

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§ (Key Features)

### ğŸš€ æè‡´æ€§èƒ½ (Performance)
* **è¶…å¤§å½±åƒæ”¯æŒ**ï¼šé‡‡ç”¨åŠ¨æ€é™é‡‡æ ·ä¸è§†å£ç¼“å­˜æŠ€æœ¯ï¼Œæµç•…åŠ è½½å¹¶æ¸²æŸ“ **GB çº§** `.tif` / `.tiff` é¥æ„Ÿå½±åƒã€‚
* **æ™ºèƒ½æ—¶åºæ’åº**ï¼šå†…ç½®æ­£åˆ™è§£æå¼•æ“ï¼Œæ ¹æ®æ–‡ä»¶åä¸­çš„æ—¥æœŸï¼ˆå¦‚ `2023-10-01`ï¼‰è‡ªåŠ¨æ„å»ºæ—¶é—´è½´ï¼Œè€Œéç®€å•çš„ ASCII æ’åºã€‚

### âš¡ é«˜æ•ˆäº¤äº’ (Interaction)
* **æ™ºèƒ½ç”»å¸ƒ**ï¼š
    * **é˜²è¶Šç•Œç³»ç»Ÿ**ï¼šç”»æ¡†ä¸è°ƒæ•´å¤§å°è¢«ä¸¥æ ¼é™åˆ¶åœ¨å›¾åƒè¾¹ç•Œå†…ã€‚
    * **é˜²é®æŒ¡æ¸²æŸ“**ï¼šé€‰ä¸­å¯¹è±¡çš„æ ‡ç­¾è‡ªåŠ¨æµ®äºé¡¶å±‚ï¼Œä¸”æ™ºèƒ½æ£€æµ‹è¾¹ç¼˜ï¼Œé˜²æ­¢æ–‡å­—è·‘å‡ºå±å¹•å¤–ã€‚
    * **æ’å®šæ‰‹æŸ„**ï¼šè°ƒæ•´å¤§å°çš„æ§åˆ¶æ‰‹æŸ„ï¼ˆé’è‰²æ–¹å—ï¼‰åœ¨å±å¹•ä¸Šä¿æŒå›ºå®šå¤§å°ï¼Œä¸å—ç¼©æ”¾æ¯”ä¾‹å½±å“ï¼Œæ˜“äºæŠ“å–ã€‚
* **å…¨åºåˆ—åŒæ­¥ (Sync)**ï¼šåŸºäºâ€œå›ºå®šåŒºåŸŸå‡è®¾â€ï¼Œä¿®æ”¹ä»»æ„ä¸€å¸§çš„æ ‡æ³¨æ¡†ä½ç½®ï¼Œè¯¥ ID åœ¨æ‰€æœ‰æ¶‰åŠå¸§ä¸Šçš„åæ ‡å‡ä¼šè‡ªåŠ¨åŒæ­¥æ›´æ–°ã€‚

### ğŸ›¡ï¸ æ•°æ®å®‰å…¨ä¸è´¨æ£€ (Safety & QC)
* **è‡ªåŠ¨ä¿å­˜ (Auto-Save)**ï¼šé‡‡ç”¨ **`{æ–‡ä»¶å¤¹å}.json`** æ ¼å¼å®æ—¶ä¿å­˜ã€‚æ‰€æœ‰æ“ä½œï¼ˆç”»æ¡†ã€ä¿®æ”¹ã€è¯„ä»·ï¼‰å‡å³æ—¶å†™å…¥ç¡¬ç›˜ï¼Œæ— éœ€æ‰‹åŠ¨ä¿å­˜ã€‚
* **å¤šç»´è´¨æ£€**ï¼šæ”¯æŒ **å›¾åƒçº§**ï¼ˆå…¨å›¾åºŸå¼ƒï¼‰ä¸ **äº‹ä»¶çº§**ï¼ˆå•ä¸ªæ¡† Good/Bad + åŸå› ï¼‰çš„åŒé‡è´¨é‡æ§åˆ¶ã€‚

---

## ğŸ› ï¸ å®‰è£… (Installation)

### ç¯å¢ƒè¦æ±‚
* Python 3.10+
* å»ºè®®ä½¿ç”¨ Conda ç¯å¢ƒ

### å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†ä»“åº“
git clone [https://github.com/your-repo/Tracker.git](https://github.com/your-repo/Tracker.git)
cd Tracker

# 2. åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ (å¯é€‰)
conda create -n tracker python=3.10
conda activate tracker

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt
# æ ¸å¿ƒä¾èµ–åº“: PyQt6, numpy, rasterio, Pillow
```

---

## ğŸ“– è¯¦ç»†æ“ä½œæŒ‡å— (Detailed Operations)

### 1. æ•°æ®åŠ è½½ä¸ç®¡ç†
* **æ‰“å¼€æ ¹ç›®å½•**ï¼šç‚¹å‡»å³ä¸Šè§’ **"ğŸ“‚ Open Root Folder"**ï¼Œé€‰æ‹©åŒ…å«å¤šä¸ªå­æ–‡ä»¶å¤¹çš„æ•°æ®é›†æ ¹ç›®å½•ï¼ˆæˆ–å•ä¸ªå›¾ç‰‡æ–‡ä»¶å¤¹ï¼‰ã€‚
* **æ–‡ä»¶å¤¹å¯¼èˆª**ï¼šå³ä¾§ **Sub-Folders / Datasets** åˆ—è¡¨æ˜¾ç¤ºå½“å‰æ ¹ç›®å½•ä¸‹çš„æ‰€æœ‰å­æ–‡ä»¶å¤¹ã€‚
    * âœ… **ç»¿è‰²å‹¾é€‰**ï¼šè¡¨ç¤ºè¯¥æ–‡ä»¶å¤¹ä¸‹å·²å­˜åœ¨æ ‡æ³¨æ–‡ä»¶ï¼ˆ`æ–‡ä»¶å¤¹å.json` æˆ–æ—§ç‰ˆ `annotations.json`ï¼‰ã€‚
    * â¬œ **ç™½è‰²æ–¹å—**ï¼šè¡¨ç¤ºè¯¥æ–‡ä»¶å¤¹å°šæœªæ ‡æ³¨ã€‚
    * **ç‚¹å‡»åˆ—è¡¨é¡¹**ï¼šå¿«é€Ÿåˆ‡æ¢æ•°æ®é›†ï¼Œæ— éœ€é‡æ–°æ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†ã€‚

### 2. è§†å›¾æ§åˆ¶ (View Control)
* **ç¼©æ”¾ (Zoom)**ï¼šæ»šåŠ¨é¼ æ ‡æ»šè½®ã€‚ä»¥é¼ æ ‡æŒ‡é’ˆä¸ºä¸­å¿ƒè¿›è¡Œç¼©æ”¾ã€‚
* **å¹³ç§» (Pan)**ï¼šæŒ‰ä½ **é¼ æ ‡å³é”®** æ‹–æ‹½ç”»å¸ƒã€‚
* **å…¨å›¾é€‚é… (Fit)**ï¼šç‚¹å‡»å·¦ä¸Šè§’çš„ **"Fit View"** æŒ‰é’®ï¼Œé‡ç½®è§†å›¾ä»¥é€‚åº”çª—å£ã€‚

### 3. æ ‡æ³¨æµç¨‹ (Annotation Workflow)

#### A. åˆ›å»ºæ–°äº‹ä»¶ (Create)
1.  **ç”»æ¡†**ï¼šåœ¨å·¦ä¾§ç”»å¸ƒä¸Šï¼ŒæŒ‰ä½ **é¼ æ ‡å·¦é”®** æ¡†é€‰ç›®æ ‡ã€‚
2.  **å±æ€§å½•å…¥**ï¼šæ¾å¼€é¼ æ ‡åå¼¹å‡ºå¯¹è¯æ¡†ï¼š
    * **Group/Category**ï¼šé€‰æ‹©é¢„è®¾ç±»åˆ«ï¼Œæˆ–ç‚¹å‡» "Custom" æ‰‹åŠ¨è¾“å…¥æ–°ç±»åˆ«ã€‚
    * **Caption**ï¼šè¾“å…¥è¯¦ç»†çš„è‡ªç„¶è¯­è¨€æè¿°ï¼ˆå¿…å¡«ï¼‰ã€‚
    * **End Frame**ï¼šæ‹–åŠ¨æ»‘å—è®¾å®šç»“æŸå¸§ã€‚**é»˜è®¤å€¼ä¸ºå½“å‰å¸§**ï¼ˆå³é»˜è®¤ä»…æ ‡æ³¨å•å¸§ï¼‰ã€‚
3.  **ç¡®è®¤**ï¼šç‚¹å‡» OKï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆæ ‡æ³¨ï¼Œå¹¶é€‰ä¸­æ–°ç”Ÿæˆçš„äº‹ä»¶ã€‚

#### B. ç¼–è¾‘ä¸è°ƒæ•´ (Edit)
* **é€‰ä¸­äº‹ä»¶**ï¼šç›´æ¥åœ¨ç”»å¸ƒä¸ŠåŒå‡»å‡»äº‹ä»¶åŒºåŸŸï¼Œæˆ–åœ¨å³ä¾§åˆ—è¡¨ç‚¹å‡» IDã€‚é€‰ä¸­é¡¹æ˜¾ç¤ºä¸º **å®çº¿**ï¼Œæ ‡ç­¾é«˜äº®ï¼Œå¹¶å¸¦æœ‰ **é’è‰²è°ƒæ•´æ‰‹æŸ„**ã€‚
* **ç§»åŠ¨ä½ç½®**ï¼šé¼ æ ‡æ‚¬åœåœ¨æ¡†å†…éƒ¨ï¼ˆå…‰æ ‡å˜ä¸ºåå­—ï¼‰ï¼ŒæŒ‰ä½å·¦é”®æ‹–æ‹½ã€‚æ‰€æœ‰å…³è”å¸§çš„åæ ‡åŒæ­¥æ›´æ–°ã€‚
* **è°ƒæ•´å¤§å°**ï¼šé¼ æ ‡æ‚¬åœåœ¨å³ä¸‹è§’çš„ **é’è‰²æ–¹å—**ï¼ˆå…‰æ ‡å˜ä¸ºå¯¹è§’ç®­å¤´ï¼‰ï¼ŒæŒ‰ä½å·¦é”®æ‹–æ‹½ã€‚
* **ä¿®æ”¹å±æ€§**ï¼šåœ¨å³ä¾§åˆ—è¡¨å³é”®ç‚¹å‡»äº‹ä»¶ -> **"âœï¸ Edit Event Info"**ï¼Œå¯ä¿®æ”¹ç±»åˆ«å’Œæè¿°ã€‚

#### C. è¿½åŠ æ—¶é—´æ®µ (Append)
*åœºæ™¯ï¼šç›®æ ‡åœ¨ç¬¬ 1-5 å¸§å‡ºç°ï¼Œç¬¬ 6-9 å¸§æ¶ˆå¤±ï¼Œç¬¬ 10 å¸§åˆåœ¨åŒä¸€ä½ç½®å‡ºç°ã€‚*
1.  è·³è½¬åˆ°ç¬¬ 10 å¸§ã€‚
2.  åœ¨ç›®æ ‡ä½ç½®ç”»æ¡†ã€‚
3.  åœ¨å¼¹çª—é¡¶éƒ¨çš„ **Target Event** ä¸‹æ‹‰èœå•ä¸­ï¼Œé€‰æ‹© **"ID x: [å·²æœ‰äº‹ä»¶åç§°]"**ã€‚
4.  ç³»ç»Ÿä¼šå°†æ–°çš„æ—¶é—´æ®µåˆå¹¶åˆ°è¯¥ ID ä¸­ï¼Œå®ç°ç¦»æ•£æ—¶é—´æ®µçš„åŒä¸€ ID è¿½è¸ªã€‚

### 4. è´¨é‡æ§åˆ¶ (Quality Control)

#### A. äº‹ä»¶çº§è´¨æ£€ (Event QC)
*é’ˆå¯¹å•ä¸ªæ ‡æ³¨æ¡†ä¸å¤Ÿå®Œç¾ï¼Œä½†ä»æœ‰ä»·å€¼ä¿ç•™çš„æƒ…å†µã€‚*
1.  é€‰ä¸­ç›®æ ‡äº‹ä»¶ã€‚
2.  åœ¨å³ä¸‹è§’ **"é€‰ä¸­äº‹ä»¶è¯„ä»·"** é¢æ¿ä¸­ï¼š
    * é€‰æ‹© **"âŒ åŠ£è´¨ (Bad)"**ã€‚
    * åœ¨ä¸‹æ–¹ä¸‹æ‹‰æ¡†é€‰æ‹©å…·ä½“åŸå› ï¼ˆå¦‚ï¼š`é®æŒ¡ä¸¥é‡ (Occluded)`, `è¾¹ç¼˜æˆªæ–­ (Truncated)`, `æ¡†ä¸è´´åˆ (Loose Box)`ï¼‰ã€‚
3.  **ç»“æœ**ï¼šå³ä¾§åˆ—è¡¨ä¸­è¯¥äº‹ä»¶å˜çº¢å¹¶æ‰“å‰ï¼ŒJSON ä¸­ä¼šè®°å½• `quality_status: "bad"` åŠ `reject_reason`ã€‚

#### B. å›¾åƒçº§è´¨æ£€ (Image QC)
*é’ˆå¯¹æ•´å¼ å›¾ç‰‡è´¨é‡å¤ªå·®ï¼ˆå¦‚å…¨äº‘é›¾è¦†ç›–ï¼‰çš„æƒ…å†µã€‚*
1.  åœ¨å·¦ä¾§é¡¶éƒ¨æ ç‚¹å‡» **"ğŸš© æ ‡è®°ä¸ºåŠ£è´¨ (Mark Poor)"** æŒ‰é’®ã€‚
2.  æŒ‰é’®å˜ä¸ºçº¢è‰²æŒ‰ä¸‹çŠ¶æ€ï¼ŒJSON ä¸­è¯¥å›¾ç‰‡ä¼šè¢«æ ‡è®°ä¸º `"poor"`ã€‚

### 5. é«˜çº§æ—¶é—´è½´æ“ä½œ (Context Menu)

åœ¨å³ä¾§ **Events List** ä¸­ **å³é”®ç‚¹å‡»** ä»»æ„äº‹ä»¶ï¼š

| èœå•é¡¹ (Menu Item) | åŠŸèƒ½è¯¦è§£ |
| :--- | :--- |
| **âŒ Remove Box from Current Frame** | **ä»…åˆ é™¤å½“å‰å¸§**çš„æ ‡æ³¨ã€‚ç”¨äºå¤„ç†ä¸­é—´æŸå‡ å¸§ç›®æ ‡çŸ­æš‚è¢«é®æŒ¡æˆ–æ¶ˆå¤±çš„æƒ…å†µã€‚ |
| **âš¡ Set Current as START** | **æˆªæ–­å¼€å¤´**ã€‚å°†å½“å‰å¸§è®¾ä¸ºè¯¥äº‹ä»¶çš„èµ·ç‚¹ï¼Œè‡ªåŠ¨åˆ é™¤å½“å‰å¸§ä¹‹å‰çš„æ‰€æœ‰æ•°æ®ã€‚ |
| **âš¡ Set Current as END** | **æˆªæ–­ç»“å°¾**ã€‚å°†å½“å‰å¸§è®¾ä¸ºè¯¥äº‹ä»¶çš„ç»ˆç‚¹ï¼Œè‡ªåŠ¨åˆ é™¤å½“å‰å¸§ä¹‹åçš„æ‰€æœ‰æ•°æ®ã€‚ |
| **ğŸ—‘ï¸ Delete Event Completely** | **å½»åº•é”€æ¯**ã€‚åˆ é™¤è¯¥ ID åŠå…¶åœ¨æ‰€æœ‰å¸§ä¸Šçš„æ•°æ®ï¼Œä¸å¯æ¢å¤ã€‚ |

---

## âŒ¨ï¸ å¿«æ·é”® (Shortcuts)

ä¸ºäº†æå‡æ ‡æ³¨æ•ˆç‡ï¼Œå»ºè®®ç†Ÿç»ƒä½¿ç”¨ä»¥ä¸‹å¿«æ·é”®ï¼ˆå…¨å±€ç”Ÿæ•ˆï¼Œæ— éœ€èšç„¦ç”»å¸ƒï¼‰ï¼š

| æŒ‰é”® (Key) | åŠŸèƒ½ (Function) |
| :--- | :--- |
| `â†` / `â†‘` | **ä¸Šä¸€å¸§ (Previous Frame)** |
| `â†’` / `â†“` | **ä¸‹ä¸€å¸§ (Next Frame)** |
| `é¼ æ ‡å·¦é”®` | ç”»æ¡† (Draw) / é€‰ä¸­æ¡† / ç§»åŠ¨æ¡† |
| `é¼ æ ‡å·¦é”®æ‹–æ‹½æ‰‹æŸ„` | è°ƒæ•´å¤§å° (Resize) |
| `é¼ æ ‡å³é”®` | æ‹–æ‹½å¹³ç§»ç”»å¸ƒ (Pan) |
| `é¼ æ ‡æ»šè½®` | ç¼©æ”¾ç”»å¸ƒ (Zoom) |

---

## ğŸ“‚ æ•°æ®è¾“å‡ºæ ¼å¼ (Output Format)

ç¨‹åºé‡‡ç”¨ **å…¨è‡ªåŠ¨ä¿å­˜** æœºåˆ¶ã€‚
æ•°æ®æ–‡ä»¶ä¿å­˜åœ¨å›¾åƒæ‰€åœ¨æ–‡ä»¶å¤¹å†…ï¼Œå‘½åè§„åˆ™ä¸º **`{æ–‡ä»¶å¤¹å}.json`**ã€‚

### JSON ç»“æ„ç¤ºä¾‹

```json
{
    "events": {
        "1": {
            "category": "Vehicle",
            "caption": "ä¸€è¾†å¡è½¦åœåœ¨è·¯è¾¹",
            "box_2d": [100, 200, 300, 400],  // æ ¼å¼: [x1, y1, x2, y2] (ç»å¯¹åƒç´ åæ ‡)
            "involved_frames": [
                "2023-01-01.tif",
                "2023-01-02.tif"
            ],
            "quality_status": "good",         // é»˜è®¤ä¸º good
            "reject_reason": null
        },
        "2": {
            "category": "Construction",
            "caption": "å·¥åœ°æ­£åœ¨æ‰“åœ°åŸºï¼Œä½†åœ¨æ ‘è«ä¸‹",
            "box_2d": [500, 600, 700, 800],
            "involved_frames": [ "2023-01-05.tif" ],
            "quality_status": "bad",          // âŒ æ ‡è®°ä¸ºåŠ£è´¨
            "reject_reason": "é®æŒ¡ä¸¥é‡ (Occluded)" // âš ï¸ å…·ä½“åŸå› 
        }
    },
    "image_quality": {
        "2023-01-01.tif": "good",
        "2023-01-02.tif": "poor"  // æ•´å¼ å›¾è¢«æ ‡è®°ä¸ºåŠ£è´¨
    }
}
```

---

## âš™ï¸ é…ç½®æ–‡ä»¶ (Configuration)

æ— éœ€ä¿®æ”¹ä»£ç ï¼Œç›´æ¥ç¼–è¾‘ `config/` ç›®å½•ä¸‹çš„ JSON æ–‡ä»¶å³å¯å®šåˆ¶å·¥å…·ï¼š

1.  **`config/categories.json`**
    * å®šåˆ¶åˆ›å»ºå¼¹çª—ä¸­çš„ç±»åˆ«å±‚çº§ï¼ˆçˆ¶ç±» -> å­ç±»ï¼‰ã€‚
2.  **`config/error_reasons.json`**
    * å®šåˆ¶è´¨é‡è¯„ä»·é¢æ¿ä¸­çš„â€œåŠ£è´¨åŸå› â€ä¸‹æ‹‰åˆ—è¡¨å†…å®¹ã€‚

