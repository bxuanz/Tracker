<div align="center">
  <img src="./assets/icon.png" alt="tracker-icon" height="120"/>

  # Tracker 
  
  **é«˜æ€§èƒ½æ—¶åºå½±åƒäº‹ä»¶æ ‡æ³¨å·¥å…· (High-Performance Temporal Event Tracker)**

  [![PyQt6](https://img.shields.io/badge/GUI-PyQt6-green.svg)](https://riverbankcomputing.com/software/pyqt/)
  [![Python](https://img.shields.io/badge/Python-3.10+-blue.svg)](https://www.python.org/)
  [![License](https://img.shields.io/badge/License-MIT-orange.svg)](LICENSE)
  [![Status](https://img.shields.io/badge/Status-Stable-brightgreen.svg)]()

  **[English](README_EN.md) | ç®€ä½“ä¸­æ–‡**

</div>

<br/>

**Tracker** æ˜¯ä¸€æ¬¾ä¸“ä¸º **â€œä½ç½®å›ºå®šã€å±æ€§å˜åŒ–â€** çš„æ—¶åºäº‹ä»¶ï¼ˆå¦‚é¥æ„Ÿå½±åƒä¸­çš„å»ºç­‘æ–½å·¥è¿›åº¦ã€æ¤è¢«ç”Ÿé•¿ç›‘æµ‹ã€å®šç‚¹è®¾æ–½ç›‘æ§ï¼‰è®¾è®¡çš„è½»é‡çº§ã€é«˜æ€§èƒ½æ ‡æ³¨å·¥å…·ã€‚

å®ƒé’ˆå¯¹ **GB çº§å¤§å°ºåº¦é¥æ„Ÿå½±åƒ (`.tif`)** è¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ï¼Œè§£å†³äº†ä¼ ç»Ÿå·¥å…·åœ¨åŠ è½½å¤šæ³¢æ®µã€è¶…å¤§åˆ†è¾¨ç‡å½±åƒæ—¶çš„å¡é¡¿é—®é¢˜ã€‚V13 ç‰ˆæœ¬å¼•å…¥äº† **å¤šç»´è´¨é‡è¯„ä»·ä½“ç³»** ä¸ **è‡ªåŠ¨ä¿å­˜æœºåˆ¶**ï¼Œæ˜¾è‘—æå‡äº†æ•°æ®é›†æ„å»ºçš„æ•ˆç‡ä¸è´¨é‡ã€‚

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§ (Key Features)

### ğŸš€ æè‡´æ€§èƒ½ (Performance)
* **è¶…å¤§å½±åƒæ”¯æŒ**ï¼šé‡‡ç”¨åŠ¨æ€é™é‡‡æ ·ä¸è§†å£ç¼“å­˜æŠ€æœ¯ï¼Œæµç•…åŠ è½½å¹¶æ¸²æŸ“ **GB çº§** `.tif` / `.tiff` é¥æ„Ÿå½±åƒã€‚
* **å¤šæ ¼å¼å…¼å®¹**ï¼šåŸç”Ÿæ”¯æŒ `.png`, `.jpg`, `.jpeg`, `.tif` ç­‰å¸¸è§æ ¼å¼ã€‚
* **æ™ºèƒ½æ—¶åºæ’åº**ï¼šå†…ç½®æ­£åˆ™è§£æå¼•æ“ï¼Œæ ¹æ®æ–‡ä»¶åä¸­çš„æ—¥æœŸï¼ˆå¦‚ `2023-10-01`ï¼‰è‡ªåŠ¨æ„å»ºæ—¶é—´è½´ï¼Œè€Œéç®€å•çš„ ASCII æ’åºã€‚

### âš¡ é«˜æ•ˆå·¥ä½œæµ (Workflow)
* **æ‰¹é‡å¡«å…… (Batch)**ï¼š**â€œä¸€æ¬¡ç”»æ¡†ï¼Œå…¨åºåˆ—åŒæ­¥â€**ã€‚åªéœ€åœ¨èµ·å§‹å¸§æ ‡æ³¨ï¼Œæ‹–åŠ¨æ»‘å—å³å¯å°†è¯¥äº‹ä»¶è‡ªåŠ¨å¡«å……è‡³æœªæ¥ N å¸§ã€‚
* **ç¦»æ•£æ‹¼æ¥ (Append)**ï¼šæ”¯æŒéè¿ç»­æ—¶é—´æ®µæ ‡æ³¨ã€‚ä¾‹å¦‚ï¼šç›®æ ‡åœ¨ç¬¬ 1-3 å¤©å‡ºç°ï¼Œç¬¬ 8-10 å¤©å†æ¬¡å‡ºç°ï¼Œå¯ç›´æ¥è¿½åŠ è‡³åŒä¸€ IDï¼Œæ— éœ€é‡å¤åˆ›å»ºã€‚
* **å…¨åºåˆ—åŒæ­¥ (Sync)**ï¼šåŸºäºâ€œå›ºå®šåŒºåŸŸå‡è®¾â€ï¼Œä¿®æ”¹ä»»æ„ä¸€å¸§çš„æ ‡æ³¨æ¡†ä½ç½®ï¼Œè¯¥ ID åœ¨æ‰€æœ‰æ¶‰åŠå¸§ä¸Šçš„åæ ‡å‡ä¼šè‡ªåŠ¨åŒæ­¥æ›´æ–°ã€‚
* **è‡ªåŠ¨ä¿å­˜ (Auto-Save)**ï¼šæ‰€æœ‰æ“ä½œï¼ˆç”»æ¡†ã€ä¿®æ”¹ã€è¯„ä»·ï¼‰å‡å®æ—¶å†™å…¥ç¡¬ç›˜ï¼Œæ— éœ€æ‹…å¿ƒç¨‹åºå´©æºƒå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚

### ğŸ›¡ï¸ åŒé‡è´¨é‡æ§åˆ¶ (Quality Control)
* **å›¾åƒçº§è´¨æ£€**ï¼šä¸€é”®æ ‡è®°æ•´å¼ å›¾ç‰‡ä¸ºâ€œåŠ£è´¨â€ï¼ˆå¦‚å…¨å›¾äº‘é›¾é®æŒ¡ã€æ•°æ®æŸåï¼‰ã€‚
* **äº‹ä»¶çº§è´¨æ£€ (Event QC)**ï¼š**V13 æ–°å¢åŠŸèƒ½**ã€‚é’ˆå¯¹å•ä¸ªæ ‡æ³¨äº‹ä»¶è¿›è¡Œç»†ç²’åº¦è¯„ä»·ï¼š
    * **Good**ï¼šåˆæ ¼æ ·æœ¬ã€‚
    * **Bad**ï¼šåŠ£è´¨æ ·æœ¬ï¼Œæ”¯æŒè®°å½•å…·ä½“åŸå› ï¼ˆå¦‚ `é®æŒ¡ä¸¥é‡`ã€`ç±»åˆ«é”™è¯¯`ã€`æ¡†ä¸è´´åˆ`ï¼‰ï¼Œæ•°æ®ç›´æ¥å†™å…¥ JSONï¼Œä¾¿äºåç»­è®­ç»ƒæ¸…æ´—ã€‚

---

## ğŸ› ï¸ å®‰è£… (Installation)

### ç¯å¢ƒè¦æ±‚
* Python 3.10+
* å»ºè®®ä½¿ç”¨ Conda ç¯å¢ƒ

### å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†ä»“åº“
git clone [https://github.com/your-repo/Tracker.git](https://github.com/your-repo/Tracker.git)
cd Tracker

# 2. åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ (å¯é€‰)
conda create -n tracker python=3.10
conda activate tracker

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt
# æ ¸å¿ƒä¾èµ–åº“: PyQt6, numpy, rasterio, Pillow
```

---

## ğŸƒâ€â™‚ï¸ æ“ä½œæŒ‡å— (User Guide)

### 1. å¯åŠ¨ä¸åŠ è½½
è¿è¡Œä¸»ç¨‹åºï¼š
```bash
python main.py
```
* ç‚¹å‡»å³ä¾§é¢æ¿é¡¶éƒ¨çš„ **"ğŸ“‚ Open Root Folder"**ã€‚
* é€‰æ‹©åŒ…å«å›¾åƒåºåˆ—çš„æ–‡ä»¶å¤¹ï¼ˆæˆ–æ•°æ®é›†æ ¹ç›®å½•ï¼‰ã€‚
* ç¨‹åºå°†è‡ªåŠ¨æ‰«æã€æ’åºå¹¶å»ºç«‹ç´¢å¼•ï¼Œåº•éƒ¨ä¼šæ˜¾ç¤ºæ—¶é—´è½´å¯¼èˆªæ¡ã€‚

### 2. æ ‡æ³¨æµç¨‹ (Annotation Workflow)

#### A. åˆ›å»ºæ–°äº‹ä»¶ (Create)
1.  **ç”»æ¡†**ï¼šåœ¨å·¦ä¾§ç”»å¸ƒä¸Šï¼ŒæŒ‰ä½é¼ æ ‡å·¦é”®æ¡†é€‰ç›®æ ‡ã€‚
2.  **å±æ€§å½•å…¥**ï¼šæ¾å¼€é¼ æ ‡åå¼¹å‡ºå¯¹è¯æ¡†ï¼š
    * **Group/Category**ï¼šé€‰æ‹©æˆ–æ‰‹åŠ¨è¾“å…¥ç±»åˆ«ã€‚
    * **Caption**ï¼šè¾“å…¥è¯¦ç»†çš„è‡ªç„¶è¯­è¨€æè¿°ã€‚
    * **End Frame**ï¼šæ‹–åŠ¨æ»‘å—ï¼Œç›´è§‚è®¾å®šè¯¥äº‹ä»¶æŒç»­çš„ç»“æŸå¸§ã€‚
3.  **ç¡®è®¤**ï¼šç‚¹å‡» OKï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆè¯¥æ—¶é—´æ®µå†…çš„è¿ç»­æ ‡æ³¨ã€‚

#### B. è´¨é‡è¯„ä»· (Quality Check) âœ¨
*å½“å‘ç°æŸä¸ªå·²æ ‡æ³¨çš„æ ·æœ¬å­˜åœ¨ç‘•ç–µï¼ˆå¦‚å±€éƒ¨é®æŒ¡ï¼‰ï¼Œä½†ä»éœ€ä¿ç•™è®°å½•æ—¶ï¼š*

1.  **é€‰ä¸­äº‹ä»¶**ï¼šåœ¨å³ä¾§ **Events List** ç‚¹å‡»ç›®æ ‡äº‹ä»¶ï¼ˆå¦‚ `ID 1: Construction`ï¼‰ã€‚
2.  **æ“ä½œé¢æ¿**ï¼šæŸ¥çœ‹å³ä¸‹è§’çš„ **"é€‰ä¸­äº‹ä»¶è¯„ä»· (Event Quality)"** åŒºåŸŸã€‚
3.  **æ ‡è®°åŠ£è´¨**ï¼š
    * åˆ‡æ¢ä¸º **"âŒ åŠ£è´¨ (Bad)"**ã€‚
    * **é€‰æ‹©åŸå› **ï¼šåœ¨ä¸‹æ‹‰æ¡†ä¸­æŒ‡å®šåŸå› ï¼ˆå¦‚ `Occluded`, `Loose Box`ï¼‰ã€‚
4.  **åé¦ˆ**ï¼šåˆ—è¡¨ä¸­è¯¥äº‹ä»¶å°†å˜çº¢å¹¶æ˜¾ç¤º `âŒ` æ ‡è®°ã€‚

#### C. è¿½åŠ æ—¶é—´æ®µ (Append)
*åœºæ™¯ï¼šç›®æ ‡æ¶ˆå¤±äº†ä¸€æ®µæ—¶é—´ååˆåœ¨åŒä¸€ä½ç½®å‡ºç°ã€‚*
1.  é€šè¿‡åº•éƒ¨å¯¼èˆªæ¡è·³è½¬åˆ°ç›®æ ‡å†æ¬¡å‡ºç°çš„å¸§ã€‚
2.  åœ¨åŒä¸€ä½ç½®ç”»æ¡†ã€‚
3.  åœ¨å¼¹çª—çš„ **Target Event** ä¸‹æ‹‰èœå•ä¸­ï¼Œé€‰æ‹© **"ID x: [å·²æœ‰äº‹ä»¶åç§°]"**ã€‚
4.  ç³»ç»Ÿä¼šè‡ªåŠ¨å°†æ–°çš„æ—¶é—´æ®µåˆå¹¶åˆ°è¯¥ ID ä¸­ã€‚

### 3. é«˜çº§ç¼–è¾‘ (Advanced Editing)

åœ¨å³ä¾§ **Events List** ä¸­å³é”®ç‚¹å‡»ä»»æ„äº‹ä»¶ï¼Œå¯ä½¿ç”¨é«˜çº§åŠŸèƒ½ï¼š

| èœå•é¡¹ (Context Menu) | åŠŸèƒ½æè¿° (Description) |
| :--- | :--- |
| **âŒ Remove Box from Current Frame** | ä»…ä»**å½“å‰å¸§**ç§»é™¤è¯¥äº‹ä»¶ï¼ˆç”¨äºå¤„ç†ä¸­é—´çŸ­æš‚çš„é®æŒ¡æˆ–æ¶ˆå¤±ï¼‰ã€‚ |
| **âš¡ Set Current as START** | å°†å½“å‰å¸§è®¾ä¸ºè¯¥äº‹ä»¶çš„**æ–°èµ·ç‚¹**ï¼ˆè‡ªåŠ¨è£å‰ªæ‰å½“å‰å¸§ä¹‹å‰çš„æ‰€æœ‰è®°å½•ï¼‰ã€‚ |
| **âš¡ Set Current as END** | å°†å½“å‰å¸§è®¾ä¸ºè¯¥äº‹ä»¶çš„**æ–°ç»ˆç‚¹**ï¼ˆè‡ªåŠ¨è£å‰ªæ‰å½“å‰å¸§ä¹‹åçš„æ‰€æœ‰è®°å½•ï¼‰ã€‚ |
| **ğŸ—‘ï¸ Delete Event Completely** | **å½»åº•åˆ é™¤**è¯¥äº‹ä»¶ ID åŠå…¶æ‰€æœ‰å†å²å¸§æ•°æ®ï¼ˆä¸å¯æ¢å¤ï¼‰ã€‚ |

---

## âŒ¨ï¸ å¿«æ·é”® (Shortcuts)

ä¸ºäº†æå‡æ ‡æ³¨æ•ˆç‡ï¼Œå»ºè®®ç†Ÿç»ƒä½¿ç”¨ä»¥ä¸‹å¿«æ·é”®ï¼š

| æŒ‰é”® (Key) | åŠŸèƒ½ (Function) |
| :--- | :--- |
| `â†` / `â†‘` | ä¸Šä¸€å¸§ (Previous Frame) |
| `â†’` / `â†“` | ä¸‹ä¸€å¸§ (Next Frame) |
| `é¼ æ ‡å·¦é”®` | ç”»æ¡† (Draw) / é€‰ä¸­æ¡† / è°ƒæ•´å¤§å° (Resize) |
| `é¼ æ ‡å³é”®` | æ‹–æ‹½å¹³ç§»ç”»å¸ƒ (Pan) |
| `é¼ æ ‡æ»šè½®` | ç¼©æ”¾ç”»å¸ƒ (Zoom) |

---

## ğŸ“‚ æ•°æ®è¾“å‡ºæ ¼å¼ (Output Format)

ç‚¹å‡» **"ğŸ’¾ Save All Data"**ï¼ˆæˆ–è§¦å‘è‡ªåŠ¨ä¿å­˜ï¼‰åï¼Œç¨‹åºä¼šåœ¨å›¾åƒç›®å½•ä¸‹ç”Ÿæˆ `annotations.json`ã€‚

### JSON ç»“æ„è¯´æ˜

```json
{
    "events": {
        "1": {
            "category": "Vehicle",
            "caption": "ä¸€è¾†å¡è½¦åœåœ¨è·¯è¾¹",
            "box_2d": [100, 200, 300, 400],  // æ ¼å¼: [x1, y1, x2, y2] (ç»å¯¹åƒç´ åæ ‡)
            "involved_frames": [
                "2023-01-01.tif",
                "2023-01-02.tif"
            ],
            "quality_status": "good",         // é»˜è®¤ä¸º good
            "reject_reason": null
        },
        "2": {
            "category": "Construction",
            "caption": "å·¥åœ°æ­£åœ¨æ‰“åœ°åŸºï¼Œä½†åœ¨æ ‘è«ä¸‹",
            "box_2d": [500, 600, 700, 800],
            "involved_frames": [ "2023-01-05.tif" ],
            "quality_status": "bad",          // âŒ æ ‡è®°ä¸ºåŠ£è´¨
            "reject_reason": "é®æŒ¡ä¸¥é‡ (Occluded)" // âš ï¸ å…·ä½“åŸå› 
        }
    },
    "image_quality": {
        "2023-01-01.tif": "good",
        "2023-01-02.tif": "poor"  // æ•´å¼ å›¾è´¨é‡å·®ï¼ˆé€šè¿‡ç•Œé¢é¡¶éƒ¨ Flag æŒ‰é’®æ ‡è®°ï¼‰
    }
}
```

---

## âš™ï¸ é…ç½®ç®¡ç† (Configuration)

å·¥å…·æ”¯æŒé€šè¿‡ä¿®æ”¹ `config/` ç›®å½•ä¸‹çš„ JSON æ–‡ä»¶æ¥å®šåˆ¶ç•Œé¢é€‰é¡¹ï¼Œæ— éœ€ä¿®æ”¹ä»£ç ï¼š

1.  **`config/categories.json`**
    * å®šä¹‰ç”»æ¡†å¼¹çª—ä¸­çš„ç±»åˆ«å±‚çº§ï¼ˆGroup -> Sub-categoryï¼‰ã€‚
2.  **`config/error_reasons.json`**
    * å®šä¹‰è´¨é‡è¯„ä»·é¢æ¿ä¸­çš„â€œåŠ£è´¨åŸå› â€ä¸‹æ‹‰åˆ—è¡¨ï¼ˆå¦‚ï¼šæ¨¡ç³Šã€è¿‡å°ã€æˆªæ–­ç­‰ï¼‰ã€‚

